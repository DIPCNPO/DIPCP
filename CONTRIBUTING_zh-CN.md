# 为 DIPCP 做贡献

[English](CONTRIBUTING.md)

感谢你考虑为 DIPCP 项目做出贡献！我们相信 **“群策群力才能创作出流芳百世的优秀作品”**， 通过提供一个永久的、协作的生态系统，使全球范围内的作家和创作者能够实现仅凭个人力量无法完成的目标。在这个生态系统中，个体的想象力被集体的智慧放大，从而能够创造出优秀的知识产权。

💬 **Discord 社区**：加入我们的 [Discord 服务器](https://discord.gg/) 参与实时讨论：

* **#general-dev** - 技术交流、功能想法与开发问题
* **#bugs-issues** - Bug 报告与问题讨论

## 我们的理念

* **市场自治（Market Autonomy）：** 内容的价值由社区的**引用次数**和**净赞数**决定，而非任何委员会或个人主观评定。
* **分叉即权利（Forking as Rights）：** 贡献者必须接受其创作在被**采纳路径**中可能被**修改、终结或移除**，且无权阻止。
* **法律外包（Legal Outsourcing）：** 本系统不承担对**剽窃、恶意破坏**等法律范畴的争议仲裁责任。此类争议完全由**受害方**通过法律途径解决。

## 什么是好的贡献？

每项贡献都应该为协同创作提供便利。问问自己：**“这是否让人们更好地协作？”**

**✅ 符合方向的贡献：**

* 弥补缺失的功能
* 修复BUG
* 吸引更多参与者
* 更好的用户体验
* 更加国际化

**❌ 不符合方向的贡献：**

* 中心化的设计
* 无法增强协作的功能
* 增加不必要复杂度
* 分裂或破坏 DIPCP 基础的特性

## 在你贡献之前

### 报告 Bug

1. **先检查已有 issue** 避免重复
2. **可先在 Discord（#bugs-issues）讨论** 以获得快速帮助
3. **使用 bug 模板** 新开 issue —— 你需要提供：

   * 明确的 bug 描述
   * 复现步骤
   * 预期行为 vs 实际行为
   * Model/IDE/BMad 版本信息
   * 截图或相关链接（如适用）
4. **如果你计划修复，请注明**，避免重复劳动

### 提供功能建议或新模块

1. **请先在 Discord（#general-dev）讨论** —— 模板会询问你是否已讨论
2. **检查是否已有相关 issue/discussion**
3. **使用功能建议模板**
4. **说明该功能如何增强人们协作的价值**

### 开始开发前的注意事项

⚠️ **提交 PR 前必须做到：**

1. **Bug 类贡献**：确认已有对应 issue（如无，请创建）
2. **功能类贡献**：先在 Discord 讨论，并创建功能 issue
3. **较大的改动**：务必先开 issue 讨论一致性

请尽量提交 **小而精** 的改动！
较大的变更请先讨论并拆分成多个 PR，以避免浪费工作。

## Pull Request 指南

### 提交到哪个分支？

**所有 PR 都提交至 `main` 分支**（仅限关键修复）：

* 🚨 严重 bug 修复（影响基本功能）
* 🔒 安全补丁
* 📚 严重错误的文档修复
* 🐛 导致无法安装或基本使用的错误

### PR 尺寸指南

* **理想大小**：200–400 行代码改动
* **最大大小**：800 行（生成文件不算）
* **每个 PR 仅处理一个 issue 或一个功能**
* **如超过限制**：请拆分成可独立 review 的多个 PR
* **相关但独立的改动也请分开提交**

### 如何拆分大型 PR（>800 行）

检查是否可以拆分：

* [ ] 可否将重构与功能实现拆开？
* [ ] 可否先提交 API/接口，再提交实现？
* [ ] 是否可按文件或模块拆分？
* [ ] 可否先提交通用工具/类型？
* [ ] 测试是否可独立成 PR？
* [ ] 每部分是否可独立提供价值？
* [ ] PR 是否可按任意顺序合并、不引入破坏性变更？

示例拆分策略：

1. PR #1：添加工具函数与类型（100 行）
2. PR #2：重构使用这些工具（200 行）
3. PR #3：实现新功能（300 行）
4. PR #4：添加完整测试（200 行）

> 注：PR #1 与 #4 可以同时提交，因为它们独立产生价值。

### Pull Request 流程

#### 第一次做 PR？没问题！

1. **Fork 仓库**
2. **Clone 你的 fork**

   ```
   git clone https://github.com/YOUR-USERNAME/DIPCP.git
   ```
3. **创建新分支** —— 不要在 `main` 上工作

   ```bash
   git checkout -b fix/description
   # 或
   git checkout -b feature/description
   ```
4. **进行修改**
5. **提交变更**

   ```bash
   git add .
   git commit -m "fix: correct typo in README"
   ```
6. **推送到你的 fork**
7. **在 GitHub 上创建 PR**

### PR 描述模板

```markdown
## What

[1-2 句：做了什么修改]

## Why

[1-2 句：为什么需要这项修改]
Fixes #[issue number]（如适用）

## How

## [2-3 条说明实现方式]

-
-

## Testing

[1-2 句说明如何测试]
```

**PR 描述上限：200 字**（不含代码）

### 好与坏的示例

❌ **差：**

> 这个史诗级 PR 通过采用最先进的架构范式极大优化性能……

✅ **好：**

> **What:** 适配了正方形的显示器
> **Why:** 在折叠屏的手机上界面显示异常
> **How:**
> * 在 mian.css 中添加了对应的样式
> **Testing:** 使用折叠屏测试，或将浏览器的尺寸调整为正方形

### Commit 信息规范

使用 Conventional Commits 格式：

* `feat:` 新功能
* `fix:` 修复 bug
* `docs:` 文档修改
* `refactor:` 不添加功能或修复 bug 的代码修改
* `test:` 测试相关
* `chore:` 构建与辅助工具

Commit message **不超过 72 字符**。

### 原子化提交

每个提交只做一件事：

* **Do:** 每个 bug fix = 一个 commit
* **Do:** 每个新功能 = 一个 commit
* **Don’t:** 将重构与 bug 修复混在一起
* **Don’t:** 将不相关的改动合并在同一 commit

## 什么是好的 Pull Request？

✅ **好的 PR：**

* 一次只改一件事
* 标题清晰准确
* PR 描述说明 What / Why
* 仅包含必要的文件更改
* 引用相关 issue

❌ **避免：**

* 整个文件重新格式化
* 多个无关改动组合在一起
* 将整个项目复制到 PR
* 缺乏说明
* 在 `main` 上直接开发

## 常见错误

1. **不要重格式化整个文件**
2. **不要包含无关改动**
3. **不要在 issue 中贴大量代码**
4. **不要提交整个项目，只提交改进内容**

## 代码风格

* 遵循现有代码风格与约定
* 复杂逻辑需要清晰注释

## 行为准则

参与本项目即代表你同意遵守我们的行为准则。我们致力于构建一个尊重、协作、专注于创作优秀作品的人文社区。

## 需要帮助？

* 💬 加入我们的 [Discord 社区](https://discord.gg/)

  * **#general-dev** 技术问题 & 功能讨论
  * **#bugs-issues** Bug 求助
* 🐛 Bug 报告模板
* 💡 功能请求模板
* 📖 GitHub Discussions

---

**请记住**：我们随时准备提供帮助！不要害怕提问。每位专家都曾经是新手。让我们一起来创作能够流芳百世的故事吧。

## [MIT License](LICENSE)

对本项目的贡献，将按照项目相同的许可证进行授权。